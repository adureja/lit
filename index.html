<!DOCTYPE HTML>
<html>
  <head>
  <link rel="stylesheet" type="text/css" href="css/lit.css">
  </head>
   <body>
    <div id="main" width="1000"> 
      <div class="game">
      <canvas id="myCanvas" width="600" height="600"></canvas>
      <script>
        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var myCircle = {
          borderWidth: 5,
          centerX: 300,
          centerY: 300,
          radius: 70
        };
        var period = 5000;

        var dirX = (Math.random() * 2) - 1;
        if (dirX >= 0) dirX = 1;
        else dirX = -1;

        var dirY = (Math.random() * 2) - 1;
        if (dirY >= 0) dirY = 1;
        else dirY = -1;

        function drawCircle(myCircle, context) {
          context.beginPath();
          context.arc(myCircle.centerX, myCircle.centerY, myCircle.radius, 0, 2 * Math.PI, false);
          context.fillStyle = '#BA4D75';
          context.fill();
        }

        function animate(myCircle, canvas, context, startTime) {
          // update
          var time = (new Date()).getTime() - startTime;
          var amplitude = 150;

          // in ms

          var centerXX = canvas.width / 2;
          var nextX = (dirX * amplitude * Math.sin(time * 2 * Math.PI / (period - 500))) + centerXX;
          myCircle.centerX = nextX;

          var centerYY = canvas.height / 2;
          var nextY = (dirY * amplitude * Math.sin(time * 2 * Math.PI / (period + 2000))) + centerYY;
          myCircle.centerY = nextY;

          // clear
          context.clearRect(0, 0, canvas.width, canvas.height);

          // draw
          drawCircle(myCircle, context);

          period -= 1;
          myCircle.radius = (((period/2)*3)/100) - 10;

          // request new frame
          requestAnimFrame(function() {
            animate(myCircle, canvas, context, startTime);
          });
        }

        drawCircle(myCircle, context);
        // wait one second before starting animation
        setTimeout(function() {
          var startTime = (new Date()).getTime();
          animate(myCircle, canvas, context, startTime);
        }, 1000);
      </script>
      </div>
    </div>
  </body>
</html>      